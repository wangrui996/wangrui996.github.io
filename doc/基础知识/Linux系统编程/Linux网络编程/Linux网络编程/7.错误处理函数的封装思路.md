# 7.错误处理函数的封装思路  

* 在前面第5节写的C/S通信代码中，对一些函数的返回值进行判断和错误处理，以bind函数为例，出错就会终止进程  
* 该函数出错的原因可能是给可一个不合法的IP地址或者端口号，但如果程序给出的IP地址是合法的，但是不存在的, 编译正常但运行起来后无法通信  
* 还有比如listen函数传一个无效的文件描述符等,并不是前面使用socket函数返回的  

* 之前都是通过对函数的返回值进行检查，如果失败就执行一个sys_err函数，通过perror函数打印出错信息并终止进程，但如果调用的函数一多，该部分代码也会比较多，且该部分与代码自身逻辑没关系，多了以后代码看起来可能没那么清晰  


* 通过增加两个 wrap.h 和 wrap.c 文件解决该问题  

##  wrap.h  

* 将socket等函数封装到自定义的函数中，首字母改成大写  

![image](https://user-images.githubusercontent.com/58176267/177318037-7827e2af-5064-4fe5-a5cf-dba2c0ee7597.png)  

## wrap.c  

* accept函数属于慢次系统调用，有可能在阻塞被其他信号打断，



