# 3.uboot移植  

* 所谓uboot的移植，就是将uboot官方的程序或者半导体厂家根据原版uboot修改后的程序，进行修改，适配自己的板子  
* 其中，如果只参考原版的uboot官方程序难度太大,坑特别多，官方uboot程序也不可能支持所有芯片  
* 一般可能是参考芯片公司提供的开发板及对应的uboot程序进一步修改  
* 比较重要的有： DRAM部分、串口部分、emmc等, 这些重要部分如果自己的板子和芯片厂家的开发板，参数一致，则可能不需要修改，编译后uboot基本可以在自己板子上跑起来  
* 其他的如网络、LCD等等其他外设，可能需要修改驱动程序后才能移植起来用  



## uboot移植步骤  

### 1.添加板子配置文件    

* uboot源码根目录下的configs目录下，根据 xxxx_deconfig 文件修改为自己的配置文件  
    * 其中对应的 imximage.cfg 文件 里面是一堆汇编代码，uboot编译完成后生成了u-boot.bin,然后添加头部信息后生成u-boot.imx文件，这个头部信息就是 imximage.cfg 文件中的信息
        * 它包括：使能所有时钟、DDR初始化等代码  所以如果用的DDR大小和芯片官方的不一致，这里要修改  
    
    * 不同的板子对应着不同的文件夹放这个imximage.cfg 文件  需要新建一个放自己修改好的 imximage.cfg 文件
![image](https://user-images.githubusercontent.com/58176267/177179241-30461e7b-2acd-43a7-8a58-5973acb235e0.png)  


### 2.添加开发板对应的头文件  

* 不同的板子有不同的配置信息，一般是每个板子有一个头文件进行配置  这里面都是C语言  
    * 对于NXP官方的这个头文件，对应configs文件下的mx6ullevk.h (evk可看作他们给板子起的名字)  
    * 
