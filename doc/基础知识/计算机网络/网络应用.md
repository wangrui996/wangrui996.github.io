# 网络应用  

## Web应用  

**web** 
* 网页 web page
    * 对象：HTML文件、JPEG图片、视频文件、动态脚本等  
    * 基本的HTML文件：包含对其他对象引用的链接  
* web对象的寻址   
    * URL ：统一资源定位器  基本组成  Scheme://host:port/path  协议://主机的域名或IP地址：端口号/路径   前面协议是http://时可省略  
  
## HTTP协议/超文本传输协议  

1.采用C/S结构  
* 客户：请求、接收、展示Web对象
* 服务器：相应用户请求，发送对象

2.传输层使用TCP协议  
* 服务器在80端口等待客户的请求  
* 浏览器发起到服务器的TCP连接（创建套接字Socket）
* 服务器接受来自浏览器的TCP连接
* 浏览器（HTTP客户端）与Web服务器（HTTP服务器）交换HTTP消息(请求、响应消息)
* 关闭TCP连接  

3.HTTP是一个**无状态协议**
* 服务器不维护任何有关客户端过去所发请求的信息(不记录，比如2分钟前请求了打开了新浪首页，现在又请求了获得新浪首页，它还是会发)  
* 原因：有状态的协议更复杂，需要维护状态(历史信息)，如果客户或者服务器失效，会产生状态的不一致，解决这种不一致代价高  

4.HTTP两种连接类型  
* 4.1 非持久性连接 
   * 每个TCP连接最多允许传输**一个**对象  HTTP 1.0版本使用  
* 4.2 持久性连接
   * 每个TCP连接允许传输多个对象  HTTP1.1使用  

**两者的不同是？**  

### 非持久性连接
* 用户在浏览器打开一个文件的过程是：  ，，，  
   * 服务器在发送完一次对象后，会关闭TCP连接  
* 响应时间分析与建模  
   * RTT ：从客户端发送一个很小的数据包到服务器并返回所经历的时间  
   * 非持久性连接 Total = 2RTT + 文件发送时间  
* 存在的问题 
   * 每个对象都需要2个RTT(以上)的时间才能获得，如果请求的一个网页又包含了10个对象，则至少又要20个RTT以上时间  
   * 操作系统需要为每个TCP连接开销资源
   * 如果用客户端并行的和服务器建立多个TCP连接解决这个问题，会对服务器造成很大负担  

### 持久性连接
   * 发送响应后，服务器保持TCP连接的打开，后续的HTTP消息可以通过这个连接发送  
**细分**  
* 无流水的持久性连接： 客户端只有收到前一个响应后发送新的请求 每个被引用的对象耗时1个RTT
* 带有流水机制的持久性连接：HTTP 1.1默认选项 客户端只要遇到一个引用对象就尽快发出请求 理想情况下，收到所有的引用的对象只需要耗时约1个RTT

### HTTP消息格式  

1.请求消息 
2.相应消息  

#### HTTP请求消息  
* ASCII码：人可直接读

**HTTP请求消息的通用格式**

请求消息也可能发送数据，如登陆请求  

##### 上传输入的方法  

* POST方法  
   * 网页经常需要填写表格
   * 在请求消息的消息体（entity body）中上传客户端的输入
* URL方法  
   * 使用 GET方法  
   * 输入信息通过request行的URL字段上传     

**例子：**
```XML
GET /somedir/page.html HTTP/1.1  
Host: www.someschool.edu
User-agent: Mozilla/4.0
Connection: close 
Accept-language:fr
```  
**问题**：客户和服务器已经建立TCP连接，为什么还需要域名  和缓存，代理服务器有关？  

#### HTTP响应消息  


