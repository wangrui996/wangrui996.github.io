

# 6.IP编址  


## IP子网  

* IP分组：
    * 源地址(SA)-从哪里来
    * 目的地址(DA)-到哪里去

* **接口(interface)** : 主机/路由器与物理链路的连接
    * 实现网络层功能
    * **路由器通常有多个接口** 
    * **主机通常只有一个或两个接口(如，有线的以太网接口，无线的802.11接口)** 


## 点分十进制IP地址形式  

* **IP地址与每个网络设备中，实现网络层设备的接口相关联**
    * 准确的说应该是某接口的IP地址  习惯上，一般说是某主机的IP地址(因为很多情况下主机只有一个网络接口)  
* 如果每个接口的IP地址编址是随意无规律的，那么路由器的转发表可能会变得非常庞大

![image](https://user-images.githubusercontent.com/58176267/162625969-53d4138c-6d14-42e7-b672-8812986a5a61.png)

## IP地址编址——IP子网  

* **IP子网：网络号相同，主机号不同**
* 跨越路由器的就不是一个IP子网  

![image](https://user-images.githubusercontent.com/58176267/162626298-c28671aa-76d8-4bc7-a3d6-0dcfc8ff164a.png)

* 从网络层来看，一个个IP子网互联，就构成了互联网络
* **下图中含6IP子网**
    * 将路由器去掉，会有一个个孤岛，孤岛内的设备可以不跨越路由器就可以来连通，每个孤岛就构成IP子网

![image](https://user-images.githubusercontent.com/58176267/162626486-aac3b96a-1ee9-424b-9d62-40cc22cec50d.png)


## 有类IP地址  

* 网路号和主机号，加起来32位，到底各占多少位，网络号占位多了，可以区分的子网就多，但是每个子网能区分的主机数量就少了  


* 二分法进行分类  
* A类地址   占50% 32位的首位为0  (也就是首位为0的都是A类地址)
    * 网络号8位，主机号24位 
    * 网络号首位为0固定，因此**A类地址的IP子网地址空间为2^7** 即0-127之间取值 
    * **点分十进制，第一个8位组，0——127** **点分十进制第一个8位组为网络号**
    
* B类地址   占25%  32bit中前两位为10     
    * 前16bit作为网络号(**前两个8位组**)，后16bit(**后两个8位组**)为主机号
    * 可以区分的网络地址为 2^14（10 14个0 ————10 14个1）  点分十进制就是 128————191  
    * **点分十进制，第一个8位组，128——191** **点分十进制前两个8位组为网络号**
     
* C类地址   占12.5%    前三位为110  
    * 前24位为网络号，后8位用于主机号  
    * 前三bit固定是110，因此，可区分的网络是2^21 
    * **点分十进制，第一个8位组，192——223** **点分十进制前三个8位组为网络号**

* D类地址 占6.25%  前四位为1110
    * 不区分网络号和主机号  **多播/组播地址，只能作为目的地址，可以向多播地址发送IP分组，主要属于这个地址的都能收到分组**
    * **点分十进制，第一个8位组，224——239** 

* E类地址 占6.25%  前四位为1111
    * 不区分网络号和主机号 **保留**
    * * **点分十进制，第一个8位组，240——255** 

* **其中A,B,C类地址占总的地址空间的87.5%(IPv4),这三类都明确了网络号，主机号分别占多少位，因此可以用于标识网络中唯一一个网络接口**   
    * A类IP子网数目少，但每个IP子网内可区分的主机数大 
    * C类网络的网络号占24位(3个8位组)，可区分的IP子网数多，但每个网络可区分的主机数较少  

![image](https://user-images.githubusercontent.com/58176267/162627334-44687972-a556-49e0-bbf1-c2ab9c9f6fbd.png)

### 特殊IP地址  

* 某些地址属于A,B，C类，但是作特殊使用，不能用于网络接口  

* **1.全0  只作为源IP地址  当主机不明确自己的IP地址，还要利用IP协议发送分组，它的源IP地址就设为全0 (0.0.0.0)**
 
* **2.网络号0，主机号是特定的值，如0.0.0.1  表示本网内某个特定主机   只可以作为目的地址** 
 
* **3.全1  255.255.255.255   本网广播地址(受限广播地址)   只能作为目的IP地址(本网内广播时，发送这个IP分组的主机所在的IP子网)，不能作为源IP地址**
  
* **4.网络号为特定值，主机号全0   网络地址，表示一个网络  不能作为源或目的IP地址  如C类地址中的192.168.0.0**

* **5.网络号为特定值  主机号全1  直接广播地址，对特定网络上所有主机进行广播 可以作为目的地址，不能作为源地址 (与3的区别是，如果是向发送广播的源主机所在的子网范围广播，用3即4个255就行，但是如果源主机发送的目的主机范围是另外的子网，就要只用直接广播地址 如 C类地址中 192.168.255.255)

* **6.网络号为127，主机号非全0和非全1的任何数   用于本地环回地址  既可以作为源地址也可以作为目的地址  如127.0.0.1，向这个IP地址发送IP分组，不会离开主机，到网络层后又回来  用于一些测试  或者与之通信的目的地址也是本机的话，也可以使用这个地址**
    * 属于A类网络，所以A类网络中第一个8位组为0的或者127的都作为特殊使用，不能分配给主机

![image](https://user-images.githubusercontent.com/58176267/162627617-ba7b2143-d31f-4c2e-85b9-b436f5abf4d7.png)

### 私有IP地址  

* A,B,C类中，还有部分IP地址只用于内部网络，在公共互联网上，这部分地址无效  
* A类中的网络号为10的  
* B类地址中的 176.16到172.31  16个块  
* **C类地址中的 192.168.0到192.168.255   256个块** 
* **因为是私有地址，在全世界互联网中，可能在很多的私有网络中都使用了其中的一个地址** 
* **这些地址可以在不同的内网被重用，正是由于这些私有网络和NAT技术（网络地址转换）, 在目前的IPv4的Internet网络，即时地址空间已被分配殆尽，整个互联网还能正常运行**  
* 这些地址都是只能在一个内部网络使用，在公共互联网上(如一个网络核心的路由器)是不认这些地址的，认为是非法的，如果一个分组目的地址是这些，会被丢掉  
 



















