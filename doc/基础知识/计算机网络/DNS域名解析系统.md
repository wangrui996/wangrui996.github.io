# DNS 域名解析系统 

## DNS ：Domain Name System  域名系统  

* 解决的Internet上主机/路由器的识别问题  
  * IP地址 本身是数字，不利用人们使用
  * 域名  
* 域名向IP地址的翻译
* 主机别名  
* 邮件服务器别名  
* 负载均衡：Web服务器  


## 域名解析系统DNS  

* 多层命令服务器构成的分布式数据库  
* 应用层协议：完成名字的解析
    * Internet核心功能，用应用层协议实现  
    * 网络边界复杂  
 
 ### 集成式的DNS问题  
 
 * 单点失败问题  一个点换掉了整个互联网就瘫痪了  
 * 流量问题   几十亿台主机都到一个地方请求域名解析  
 * 距离问题  
 * 维护性问题  


### 分布式层次式数据库  

![image](https://user-images.githubusercontent.com/58176267/156288734-f996f716-240d-4439-b1e4-284ad3646a5f.png)

### DNS根域名服务器  

* 本地域名服务器无法解析域名时，访问根域名服务器  
* 根域名服务器  
    * 如果不知道映射，访问权威域名服务器  
    * 获得映射  
    * 向本地域名服务器返回域名  
全球有13个根域名服务器    

### 顶级域名（TLD, top-level domain）和权威域名解析服务器

* 负责com org, net, edu等，顶级域名和国家顶级域名，例如cn，uk，fr等  
    * Network Solutions维护com顶级域名服务器  
    * Educause维护edu顶级域名服务器  

* 权威(Authoritative)域名服务器：组织的域名解析服务器，提供组织内部服务器的解析服务
    * 组织负责维护  
    * 服务提供商负责维护  

### 本地域名解析服务器  

* 不严格属于层级体系  
* 每个ISP有一个本地域名服务器  
    * 默认域名解析服务器  
* 当主机进行DNS查询时，查询被发送到本地域名服务器
    * 作为代理(proxy)，将查询转发给（层级式）域名解析服务器系统  

## DNS查询示例  

### 1.迭代查询  

* 被查询服务器返回域名解析服务器的名字
* “我不认识这个域名，但是你可以问这个服务器”
![image](https://user-images.githubusercontent.com/58176267/156358442-76a24b41-0994-4203-ae19-27e3bc486e2d.png)

### 2.递归查询  

* 将域名解析的任务交给所联系的服务器  

![image](https://user-images.githubusercontent.com/58176267/156358781-b83f33a8-4abd-4c3c-afd1-1f94f2806230.png)

## DNS记录缓存和更新  

* 只要域名解析服务器获得**域名——IP映射** 即**缓存**这一映射  
    * 一段时间过后，缓存条目失效(删除)  
    * 本地域名服务器一般会缓存顶级域名服务器的映射
        * 因此根域名服务器不经常被访问  
* 记录的更新/通知机制  
    * RFC 2136  
  
